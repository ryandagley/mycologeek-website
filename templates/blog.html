<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LZZSLDQ0M5"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-LZZSLDQ0M5');
    </script>

    <title>Mycologeek - Blog</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/style.css">
    <link href='https://fonts.googleapis.com/css?family=Oxygen:400,300' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;700&display=swap" rel="stylesheet">

</head>
<body>

<!-- Start wrapper -->
<div class="wrapper">
    <div class="container">

       <!-- Navigation -->
       <nav class="navbar navbar-default" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

             
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li>
                    <a href="../../index.html">Home</a>
                 </li>
                    <li class="dropdown">
                      <a href="../../about.html" class="dropdown-toggle" data-toggle="dropdown">About<b class="caret"></b></a>
                      <ul class="dropdown-menu">
                          <li>
                              <a href="../../about.html">About Mycologeek</a>
                          </li>
                          <li>
                              <a href="../../about-ryan.html">About Ryan</a>
                          </li>
                      </ul>
                  </li>
                <li>
                   <a href="../../monitor.html">Monitor</a>
                </li>
                <li>
                   <a href="../../gallery.html">Gallery</a>
                </li>
                <li>
                   <a  href="../../technical.html">Technical</a>
                </li>
                <li class="active">
                   <a href="../../../blog.html">Blog</a>
                </li>
            </ul>
        </div>
        <!-- /navbar-collapse -->
     </nav>
     <!-- End nav -->

     <div class="margin-news">
        <div class="col-md-10 col-xs-offset-1">
          <h4 class="heading-inner-blog">Mycologeek Blog</h4>
          <div class="row">
            <!-- Main Blog Post (Latest) -->
            <div class="col-md-8">
                <div class="main-post" style="position: relative;">
                    <a href="">
                        <img src="IMAGE_URL" alt="Latest Post Image" class="main-post-image">
                    </a>
                    <div class="main-post-overlay">
                        <h1><a href="">Latest Post Title</a></h1>
                        <p>by Author | Published on Date</p>
                    </div>
                </div>
            </div>
            
            <!-- Featured Posts (Tech and Mushroom) -->
            <div class="col-md-4">
                <div class="featured-post">
                    <a href="">
                        <img src="TECH_POST_IMAGE_URL" alt="Tech Post" class="featured-post-image">
                    </a>
                    <div class="featured-post-overlay">
                        <h3><a href="">Tech Post Title</a></h3>
                        <p>by Author | Published on Date</p>
                    </div>
                </div>
                <div class="featured-post" style="margin-top: 20px;">
                    <a href="">
                        <img src="MUSHROOM_POST_IMAGE_URL" alt="Mushroom Post" class="featured-post-image">
                    </a>
                    <div class="featured-post-overlay">
                        <h3><a href="">Mushroom Post Title</a></h3>
                        <p>by Author | Published on Date</p>
                    </div>
                </div>
            </div>
        </div>
        

        <!-- Trending Now Section -->
<div class="trending-now">
    <h2>Trending Now</h2>
    <div class="row">
        <div class="col-md-4 trending-post">
            <a href="">
                <img src="TRENDING_POST_1_IMAGE" alt="Trending Post 1" class="img-responsive">
            </a>
            <h4><a href="">Trending Post 1 Title</a></h4>
            <p>Published on Date</p>
        </div>
        <div class="col-md-4 trending-post">
            <a href="">
                <img src="TRENDING_POST_2_IMAGE" alt="Trending Post 2" class="img-responsive">
            </a>
            <h4><a href="">Trending Post 2 Title</a></h4>
            <p>Published on Date</p>
        </div>
        <div class="col-md-4 trending-post">
            <a href="">
                <img src="TRENDING_POST_3_IMAGE" alt="Trending Post 3" class="img-responsive">
            </a>
            <h4><a href="">Trending Post 3 Title</a></h4>
            <p>Published on Date</p>
        </div>
    </div>
</div>

<!-- Categories Section -->
<div class="trending-now">
    <h2>Categories</h2>
    <div class="row">
        <!-- Mushroom Category Column -->
        <div class="col-md-6">
            <h3>Mushroom</h3>
            <ul id="mushroom-tags">
                <!-- Mushroom tags will be dynamically generated here -->
            </ul>
        </div>

        <!-- Tech Category Column -->
        <div class="col-md-6">
            <h3>Tech</h3>
            <ul id="tech-tags">
                <!-- Tech tags will be dynamically generated here -->
            </ul>
        </div>
    </div>
</div>

        <!-- Archives Section -->
        <div class="row archives">
            <div class="col-md-6">
                <!-- <h3>Search by Date</h3> -->
                <ul id="archive-dates">
                    <!-- Dates will be dynamically generated here -->
                </ul>
            </div>
            <div class="col-md-6">
                <!-- <h3>Search by Category</h3>  -->
                <ul id="archive-categories">
                    <!-- Categories will be dynamically generated here -->
                </ul>
            </div>
        </div>
    </div>
</div>



<script>
    async function loadBlogPosts() {
    try {
        const response = await fetch('https://dvt5d6vfgi.execute-api.us-west-2.amazonaws.com/dev/blog/');
        const responseData = await response.json();

        // Parse the response data
        const data = JSON.parse(responseData.body); // Parse the body field if it's a string

        // Create two sets to collect all tags for Mushroom and Tech categories
        let mushroomTags = new Set();
        let techTags = new Set();

        // Main Post (Latest Post) 
        if (data.length > 0) {
            const latestPost = data[0];
            document.querySelector('.main-post img').src = latestPost.FeaturedImageURL;
            document.querySelector('.main-post-overlay h1').innerHTML = `<a href="/blog/${latestPost.PostID}">${latestPost.Title}</a>`;
            document.querySelector('.main-post-overlay p').innerText = `by ${latestPost.Author} | Published on ${latestPost.Date}`;
            document.querySelector('.main-post a').href = `/blog/${latestPost.PostID}`;

            // Featured Posts (Tech and Mushroom)
            const techPost = data.find(post => post.Category === 'Tech');
            const mushroomPost = data.find(post => post.Category === 'Mushroom');

            if (techPost) {
                document.querySelectorAll('.featured-post')[0].querySelector('img').src = techPost.FeaturedImageURL;
                document.querySelectorAll('.featured-post')[0].querySelector('h3').innerHTML = `<a href="/blog/${techPost.PostID}">${techPost.Title}</a>`;
                document.querySelectorAll('.featured-post')[0].querySelector('p').innerText = `by ${techPost.Author} | Published on ${techPost.Date}`;
                document.querySelectorAll('.featured-post')[0].querySelector('a').href = `/blog/${techPost.PostID}`;
            }

            if (mushroomPost) {
                document.querySelectorAll('.featured-post')[1].querySelector('img').src = mushroomPost.FeaturedImageURL;
                document.querySelectorAll('.featured-post')[1].querySelector('h3').innerHTML = `<a href="/blog/${mushroomPost.PostID}">${mushroomPost.Title}</a>`;
                document.querySelectorAll('.featured-post')[1].querySelector('p').innerText = `by ${mushroomPost.Author} | Published on ${mushroomPost.Date}`;
                document.querySelectorAll('.featured-post')[1].querySelector('a').href = `/blog/${mushroomPost.PostID}`;
            }

            // Trending Posts (Index starts from 1 to 3)
            for (let i = 1; i < 4; i++) {
                const trendingPost = data[i];
                if (trendingPost) {
                    document.querySelectorAll('.trending-post img')[i - 1].src = trendingPost.FeaturedImageURL;
                    document.querySelectorAll('.trending-post h4')[i - 1].innerHTML = `<a href="/blog/${trendingPost.PostID}">${trendingPost.Title}</a>`;
                    document.querySelectorAll('.trending-post p')[i - 1].innerText = `by ${trendingPost.Author} | Published on ${trendingPost.Date}`;
                    document.querySelectorAll('.trending-post a')[i - 1].href = `/blog/${trendingPost.PostID}`;
                }
            }

            // Process All Posts to extract Tags for Categories Section
            data.forEach(post => {
                // Collect tags for the "Mushroom" category
                if (post.Category === 'Mushroom' && post.Tags) {
                    post.Tags.forEach(tag => mushroomTags.add(tag));
                }

                // Collect tags for the "Tech" category
                if (post.Category === 'Tech' && post.Tags) {
                    post.Tags.forEach(tag => techTags.add(tag));
                }
            });

            // Display Mushroom category tags
            const mushroomTagsContainer = document.getElementById('mushroom-tags');
            mushroomTags.forEach(tag => {
                mushroomTagsContainer.innerHTML += `<li><a href="/tags/${tag}">${tag}</a></li>`;
            });

            // Display Tech category tags
            const techTagsContainer = document.getElementById('tech-tags');
            techTags.forEach(tag => {
                techTagsContainer.innerHTML += `<li><a href="/tags/${tag}">${tag}</a></li>`;
            });

        } else {
            console.error('No posts found');
        }
    } catch (error) {
        console.error('Failed to load blog posts:', error);
    }
}

loadBlogPosts();


</script>

</body>
</html>
